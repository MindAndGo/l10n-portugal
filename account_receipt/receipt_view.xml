<?xml version="1.0"?>
<openerp>
  <data>
    <!-- Receipt View
	=====================================================================================	-->

        <record model="ir.ui.view"  id="account_receipt_form_view" >
            <field name="name">account.receipt.form</field>
            <field name="model">account.receipt</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Recibos">
                    <field name="partner_id" select="1" readonly="1"/>
                    <field name="name" select="1" readonly="1"/>
                    <field name="value" select="2" readonly="1"/>
                    <field name="date" readonly="1"/>
                    <field colspan="4" mode="tree" name="lines" readonly="1">
                        <tree string="Lista de facturas">
                            <field name="invoice_id" readonly="1"/>
                            <field name="amount" readonly="1"/>
                        </tree>
                        <form>
                            <field name="invoice_id" readonly="1"/>
                            <field name="amount" readonly="1"/>
                        </form>
                    </field>
                </form>
            </field>
        </record>
        
        <record model="ir.ui.view"  id="account_receipt_tree_view" >
            <field name="name">account.receipt.tree</field>
            <field name="model">account.receipt</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Recibos">
                    <field name="partner_id" select="1" readonly="1"/>
                    <field name="name" select="1" readonly="1"/>
                    <field name="value" readonly="1"/>
                    <field name="date" readonly="1"/>
                </tree>
            </field>
        </record>
    
    <record model="ir.actions.act_window" id="action_receipt_form">
		<field name="name">Receipt</field>
        <field name="res_model">account.receipt</field>
		<field name="view_mode">tree,form</field>
    </record>
    <menuitem name="Receipts" sequence="15" id="menu_receipts" parent="account.menu_finance" action="action_receipt_form"/>


    <record model="ir.ui.view" id="receipt_wizard_view">
      <field name="name">receipt.wizard.form</field>
      <field name="model">wizard.receipt</field>
      <field name="type">form</field>
      <field name="arch" type="xml">
        <form string="Lista de facturas">
          <field name="partner_id"/>
          <field name="rec_date" attrs="{'required':[('state','=','get')]}"/>
          <field name="journal"  attrs="{'required':[('state','=','get')]}"/>
          <field name="total" />
          <field name="state" invisible="True"/>
          <newline/>
          <group  states="get" colspan="4">
          <field name="lines" colspan="4">
            <tree string="Open invoices" editable="bottom">
              <field name="inv_number" readonly="1"/>
              <field name="inv_date" readonly="1"/>
              <field name="due_date" readonly="1"/>
              <field name="inv_total" readonly="1"/>
              <field name="inv_residual" readonly="1"/>
              <!--field name="inv_move" invisible="True"/ -->
              <field name="to_pay" on_change="onchange_topay(to_pay, inv_residual)"/>
              <field name="paid_amount" on_change="onchange_paid_amount(paid_amount, inv_residual)" 
                        attrs="{'readonly':[('to_pay','=',0)]}"/>
            </tree>
          </field>
          </group>
          <group col="2" colspan="4" fill="1">
            <button icon="gtk-cancel" name="act_cancel" special="cancel" states="choose" string="Cancel" type="object"/>
            <button icon="gtk-ok" name="get_invoices" states="choose" string="Get Invoices" type="object"/>
            <button icon="gtk-close" name="act_destroy" special="cancel" states="get" string="Close" type="object"/>
            <button icon="gtk-ok" name="create_receipt" states="get" string="Create receipt" type="object"/>
            <button icon="gtk-close" name="act_destroy" special="cancel" states="done" string="Close" type="object"/>
          </group>
        </form>
      </field>
    </record>
    <record model="ir.actions.act_window" id="action_receipt_wizard">
      <field name="name">New Receipt</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">wizard.receipt</field>
      <field name="view_type">form</field>
      <field name="view_mode">form</field>
      <field name="target">new</field>
    </record>
    <menuitem name="New Receipt" id="menu_action_receipt_wizard" action="action_receipt_wizard" parent="menu_receipts"/>
    
        <record id="account_receipt_new" model="ir.values">
            <field eval="'client_action_multi'" name="key2"/>
            <field eval="'account.receipt'" name="model"/>
            <field name="name">New Receipt</field>
            <field eval="'ir.actions.act_window,'+str(action_receipt_wizard)" name="value"/>
            <field eval="True" name="object"/>
        </record>    
    
  </data>
</openerp>
